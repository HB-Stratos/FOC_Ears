; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

; =============================================================================
; Base Configuration - All environments inherit from this
; =============================================================================
[env]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/55.03.34/platform-espressif32.zip
board = esp32-s3-devkitc1-n16r8
framework = arduino
monitor_speed = 115200
lib_archive = no
lib_ldf_mode = deep+
; build_flags =
; 	-D ARDUINO_USB_MODE=1
; 	-D ARDUINO_USB_CDC_ON_BOOT=1 
board_build.usb_mode = native
board_build.usb_cdc_on_boot = enable
; build_flags = 
; 	-DARDUINO_USB_CDC_ON_BOOT=1
;     -DCORE_DEBUG_LEVEL=1
build_flags = 
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
lib_deps = 
	askuric/Simple FOC @ ^2.3.5
	simplefoc/SimpleFOCDrivers @ ^1.0.9
	fastled/FastLED @ ^3.10.3
	adafruit/Adafruit BNO055 @ ^1.6.3
	adafruit/Adafruit Unified Sensor @ ^1.1.14
	pololu/VL53L1X@^1.3.1
	https://github.com/LiquidCGS/FastIMU.git
monitor_filters = 
	esp32_exception_decoder
	printable
; Only compile main.cpp and helper classes (EarController, IMUHandler)
; Exclude the "main" implementation files which are included via #include in main.cpp
build_src_filter = +<*> -<.git/> -<.svn/> -<apps/foc_ears_main.cpp> -<utils/*.cpp>

; =============================================================================
; Main FOC Ears Application
; Full implementation with IMU control and motor management
; =============================================================================
[env:foc_ears]
build_flags = 
	-D USE_FOC_EARS

; =============================================================================
; I2C Scanner Utility
; Scans I2C bus and reports all connected devices
; =============================================================================
[env:i2c_scanner]
build_flags = 
	-D USE_I2C_SCANNER

; =============================================================================
; Motor Test Utility
; Tests motor control and calibration
; =============================================================================
[env:motor_test]
build_flags = 
	-D USE_MOTOR_TEST

; =============================================================================
; Sensor Test Utility
; Tests sensor readings and calibration
; =============================================================================
[env:sensor_test]
build_flags = 
	-D USE_SENSOR_TEST

; =============================================================================
; BNO055 IMU Test Utility
; Tests BNO055 IMU sensor and orientation readings
; =============================================================================
[env:bno055_test]
build_flags = 
	-D USE_BNO055_TEST

; =============================================================================
; LED Test Utility
; Tests onboard RGB LED with FastLED
; =============================================================================
[env:led_test]
build_flags = 
	-D USE_LED_TEST

[env:vl53l1x_test]
build_flags = 
	-D USE_VL53L1X_TEST

; =============================================================================
; MPU6500 IMU Test Utility
; Tests MPU6500 6-axis IMU with sensor fusion for roll/pitch
; =============================================================================
[env:mpu6500_test]
build_flags = 
	-D USE_MPU6500_TEST
